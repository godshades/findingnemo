<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<title>Tìm điểm ăn chơi</title>
	<style>
		/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
		#map {
			height: 100%;
		}

		/* Optional: Makes the sample page fill the window. */
		html,
		body {
			height: 100%;
			margin: 0;
			padding: 0;
		}

		.inline {
			display: inline-block
		}
	</style>
</head>

<body>
	<div class="inline col-md-5 col-12">
		<input id="pac-input" class="form-control" type="text" placeholder="Place 1">
	</div>
	<div class="inline col-md-5 col-12">
		<input id="pac-input2" class="form-control" type="text" placeholder="Place 2">
	</div>
	<div id="map"></div>
	<script>
		var distance;
		var place1, place2;
		var circle, circle2;

		function initMap() {
			// Create the map.
			var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 13,
				center: { lat: 21.022736, lng: 105.8019441 },
			});

			// Create the search box and link it to the UI element.
			var input = document.getElementById('pac-input');
			var input2 = document.getElementById('pac-input2');

			var searchBox = new google.maps.places.SearchBox(input);
			var searchBox2 = new google.maps.places.SearchBox(input2);

			//map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);
			//map.controls[google.maps.ControlPosition.TOP_CENTER].push(input2);

			// Bias the SearchBox results towards current map's viewport.
			map.addListener('bounds_changed', function () {
				searchBox.setBounds(map.getBounds());
			});

			map.addListener('bounds_changed', function () {
				searchBox2.setBounds(map.getBounds());
			});

			var markers = [];
			var markers2 = [];

			// Listen for the event fired when the user selects a prediction and retrieve
			// more details for that place.
			searchBox.addListener('places_changed', function () {
				var places = searchBox.getPlaces();

				if (places.length == 0) {
					return;
				}

				// Clear out the old markers.
				markers.forEach(function (marker) {
					marker.setMap(null);
				});
				markers = [];

				places.forEach(function (place) {
					if (!place.geometry) {
						console.log("Returned place contains no geometry");
						return;
					}
					place1 = place.geometry.location
					// Create a marker for each place.
					markers.push(new google.maps.Marker({
						map: map,
						title: place.name,
						position: place1
					}));

					if (place2 != null) {
						displayRadius(place1, place2)
					}
				});
			});

			searchBox2.addListener('places_changed', function () {
				var places = searchBox2.getPlaces();

				if (places.length == 0) {
					return;
				}

				// Clear out the old markers.
				markers2.forEach(function (marker2) {
					marker2.setMap(null);
				});
				markers2 = [];

				places.forEach(function (place) {
					if (!place.geometry) {
						console.log("Returned place contains no geometry");
						return;
					}
					place2 = place.geometry.location
					// Create a marker for each place.
					markers2.push(new google.maps.Marker({
						map: map,
						title: place.name,
						position: place2
					}));
					if (place1 != null) {
						displayRadius(place1, place2)
					}
				});
			});

			function displayRadius(place1, place2) {
				distance = google.maps.geometry.spherical.computeDistanceBetween(place1, place2)

				if (circle != null)
					circle.setMap(null);

				if (circle2 != null)
					circle2.setMap(null);

				// Add the circle for this
				circle = new google.maps.Circle({
					strokeColor: '#FF0000',
					strokeOpacity: 0.8,
					strokeWeight: 1,
					fillColor: '#FF0000',
					fillOpacity: 0.1,
					map: map,
					center: place1,
					radius: distance
				});

				circle2 = new google.maps.Circle({
					strokeColor: '#FF0000',
					strokeOpacity: 0.8,
					strokeWeight: 1,
					fillColor: '#FF0000',
					fillOpacity: 0.1,
					map: map,
					center: place2,
					radius: distance
				});

				var bounds = new google.maps.LatLngBounds();
				bounds.extend(place1);
				bounds.extend(place2);
				map.fitBounds(bounds);
			}
		}


	</script>
	<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMZKcVJJ0FCXeUyYYsVl5_Y22aIOgTAxQ&callback=initMap&libraries=geometry,places&region=VN"
		type="text/javascript"></script>
</body>

</html>
